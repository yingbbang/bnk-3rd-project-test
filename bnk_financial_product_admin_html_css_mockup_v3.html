<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BNK 예금·적금 | 다국어 지원 고객페이지</title>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
  <style>
    :root{
      --bnk-red:#e6002d;--ink-900:#0c0d0e;--ink-700:#2d2f36;--ink-500:#5b6270;--ink-300:#a3a9b6;
      --bg:#f6f7fb;--card:#ffffff;--line:#e6e8ef;--radius:14px;--shadow:0 6px 20px rgba(26,30,41,.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--ink-900);font:14px/1.5 "Pretendard","Segoe UI",Arial,sans-serif}
    [lang="en"]{display:none}
    .lang-en body[lang="en"]{display:block}
    /* Header */
    .topbar{background:#fff;border-bottom:1px solid var(--line);height:64px;display:flex;align-items:center;justify-content:space-between;padding:0 16px;position:sticky;top:0;z-index:10}
    .brand{display:flex;align-items:center;gap:10px}
    .logo{width:120px;height:36px;border-radius:8px;background:#fff;display:grid;place-items:center;border:1px solid var(--line)}
    .logo b{color:var(--bnk-red);font-size:18px}
    .searchbar{display:flex;gap:8px;align-items:center;flex-wrap:wrap;justify-content:flex-end}
    .searchbar input{height:36px;border:1px solid var(--line);border-radius:10px;padding:0 10px}
    .btn{display:inline-flex;align-items:center;gap:8px;height:36px;padding:0 12px;border-radius:10px;border:1px solid var(--line);background:#fff;color:var(--ink-900);font-weight:600;cursor:pointer}
    .btn.primary{background:var(--bnk-red);border-color:var(--bnk-red);color:#fff}
    .container{max-width:1120px;margin:20px auto;padding:0 12px}
    .section{background:var(--card);border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px;margin-bottom:16px}
    .filters{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
    .filters select,.filters input[type=range]{height:36px;border:1px solid var(--line);border-radius:10px;padding:0 10px;width:100%}
    .product-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    @media(max-width:980px){.product-grid{grid-template-columns:repeat(2,1fr)}}
    @media(max-width:640px){.product-grid{grid-template-columns:1fr}.filters{grid-template-columns:1fr}}
    .card{border:1px solid var(--line);border-radius:12px;padding:12px;background:#fff;display:flex;flex-direction:column;gap:8px}
    .thumb{height:80px;border-radius:10px;display:grid;place-items:center;background:#fef3f5;color:var(--bnk-red);font-weight:600}
    .chart{height:400px;border:1px solid var(--line);border-radius:12px}
  </style>
</head>
<body>
  <header class="topbar" role="banner">
    <div class="brand" aria-label="BNK 로고">
      <div class="logo"><b>BNK</b></div>
      <div><strong>예금·적금</strong></div>
    </div>
    <div class="searchbar" role="search">
      <input id="globalSearch" placeholder="상품명 검색" aria-label="상품 검색" />
      <input id="openaiKey" type="password" placeholder="OpenAI API Key (sk-...)" aria-label="OpenAI 키" />
      <button id="saveKey" class="btn ghost">키 저장</button>
      <select id="langSwitch" aria-label="언어 선택">
        <option value="ko">한국어</option>
        <option value="en">English</option>
      </select>
    </div>
  </header>
  <main class="container" role="main">
    <section class="section">
      <h2>필터</h2>
      <div class="filters">
        <select id="fCategory" aria-label="상품유형 선택">
          <option value="">상품유형 전체</option>
          <option>정기예금</option><option>자유적금</option><option>ESG적금</option>
        </select>
        <div>
          <label for="fRate">금리범위</label>
          <input id="fRate" type="range" min="0" max="8" step="0.1" value="2" aria-valuemin="0" aria-valuemax="8" aria-valuenow="2" />
          <div><small id="rateVal">2%</small></div>
        </div>
      </div>
    </section>
    <section class="section">
      <h2>상품 리스트</h2>
      <div class="product-grid" id="productList"></div>
    </section>
    <section class="section">
      <h2>비교 그래프 / 세후수익 시뮬레이터</h2>
      <div id="compareChart" class="chart" aria-label="금리 비교 그래프"></div>
      <div style="margin-top:8px">
        <label>세율(%) <input type="number" id="taxRate" value="15.4" min="0" max="50" step="0.1" aria-label="세율 입력"></label>
        <button class="btn primary" id="simulateBtn">세후 수익 계산</button>
      </div>
      <p id="simResult" aria-live="polite"></p>
    </section>
  </main>
  <footer class="footer" role="contentinfo">
    <small>© BNK Demo — 다국어, 접근성, 세후수익 기능 포함.</small>
  </footer>
  <script>
    const PRODUCTS=[{id:'1',name:'BNK 정기예금',rate:3.2,period:12},{id:'2',name:'BNK 청년적금',rate:4.1,period:24},{id:'3',name:'BNK ESG적금',rate:3.8,period:12}];
    let chart;
    document.addEventListener('DOMContentLoaded',()=>{
      chart=echarts.init(document.getElementById('compareChart'));
      updateChart();
      document.getElementById('fRate').addEventListener('input',e=>{
        document.getElementById('rateVal').textContent=e.target.value+'%';
      });
      document.getElementById('simulateBtn').addEventListener('click',simulateAfterTax);
      document.getElementById('langSwitch').addEventListener('change',e=>switchLang(e.target.value));
    });
    function updateChart(){
      chart.setOption({xAxis:{type:'category',data:PRODUCTS.map(p=>p.name)},yAxis:{type:'value'},series:[{data:PRODUCTS.map(p=>p.rate),type:'bar',itemStyle:{color:'#e6002d'}}]});
    }
    function simulateAfterTax(){
      const tax=parseFloat(document.getElementById('taxRate').value||0)/100;
      const avg=PRODUCTS.reduce((a,b)=>a+b.rate,0)/PRODUCTS.length;
      const after=(avg*(1-tax)).toFixed(2);
      document.getElementById('simResult').textContent=`평균 금리 ${avg.toFixed(2)}% → 세후 수익률 ${after}%`;
    }
    function switchLang(lang){
      const dict={ko:{title:'예금·적금',filter:'필터',list:'상품 리스트',compare:'비교 그래프'},en:{title:'Deposit & Savings',filter:'Filter',list:'Product List',compare:'Comparison Graph'}};
      document.title='BNK '+dict[lang].title;
      document.querySelector('h2').textContent=dict[lang].filter;
    }
  </script>
</body>
</html>