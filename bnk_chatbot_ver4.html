<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>예금·적금·카드 FAQ 챗봇</title>
  <style>
    body {
      background: #f7f8f9;
      font-family: 'Noto Sans KR', sans-serif;
      margin: 0;
      height: 100vh;
    }

    .chatbot-float-btn {
      position: fixed;
      bottom: 24px;
      right: 24px;
      background: #D71E28;
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 64px;
      height: 64px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      transition: all 0.2s ease;
      z-index: 1000;
    }
    .chatbot-float-btn:hover { background: #b51821; transform: scale(1.05); }

    .chat-container {
      position: fixed;
      bottom: 100px;
      right: 30px;
      width: 420px;
      height: 650px;
      background: white;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      visibility: hidden;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.3s ease;
      z-index: 999;
    }
    .chat-container.active { visibility: visible; opacity: 1; transform: translateY(0); }

    header {
      background: #D71E28;
      color: white;
      padding: 14px 16px;
      font-weight: 600;
      font-size: 18px;
      text-align: center;
    }

    #chat-window {
      flex: 1;
      padding: 16px;
      overflow-y: auto;
      background: #f7f8f9;
    }

    .message { margin-bottom: 12px; display: flex; }
    .bot { justify-content: flex-start; }
    .user { justify-content: flex-end; }

    .bubble {
      max-width: 75%;
      padding: 10px 14px;
      border-radius: 14px;
      line-height: 1.4;
      font-size: 15px;
    }
    .bot .bubble { background: #eef0f2; color: #222; border-top-left-radius: 0; }
    .user .bubble { background: #D71E28; color: white; border-top-right-radius: 0; }

    footer {
      display: flex;
      padding: 8px;
      border-top: 1px solid #ddd;
      background: white;
      align-items: center;
    }

    #user-input {
      flex: 1;
      padding: 10px;
      border: none;
      border-radius: 8px;
      background: #f1f3f5;
      font-size: 15px;
    }

    .chatbot-button { background: transparent; border: none; cursor: pointer; margin-left: 6px; }
    .chatbot-button svg { fill: #D71E28; transition: fill 0.2s ease; }
    .chatbot-button:hover svg { fill: #b51821; }

    .faq-btn {
      display: block;
      background: white;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 8px 10px;
      margin: 4px 0;
      text-align: left;
      font-size: 14px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .faq-btn:hover { background: #f1f3f5; }
  </style>
</head>
<body>

  <button class="chatbot-float-btn" id="chatbotToggle">💬</button>

  <div class="chat-container" id="chatbotBox">
    <header>예금·적금·카드 FAQ 챗봇</header>
    <main id="chat-window"></main>
    <footer>
      <input id="user-input" type="text" placeholder="메시지를 입력하세요..." />
      <button type="button" id="send-btn" class="chatbot-button">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="22px" class="send-icon">
          <path d="M476.59 227.05l-.16-.07L49.35 49.84A23.56 23.56 0 0027.14 52 24.65 24.65 0 0016 72.59v113.29a24 24 0 0019.52 23.57l232.93 43.07a4 4 0 010 7.86L35.53 303.45A24 24 0 0016 327v113.31A23.57 23.57 0 0026.59 460a23.94 23.94 0 0013.22 4 24.55 24.55 0 009.52-1.93L476.4 285.94l.19-.09a32 32 0 000-58.8z"></path>
        </svg>
      </button>
    </footer>
  </div>

  <script>
    const chatbotToggle = document.getElementById("chatbotToggle");
    const chatbotBox = document.getElementById("chatbotBox");
    chatbotToggle.addEventListener("click", () => chatbotBox.classList.toggle("active"));

    const chatWindow = document.getElementById("chat-window");
    const input = document.getElementById("user-input");
    const sendBtn = document.getElementById("send-btn");

    sendBtn.addEventListener("click", sendMessage);
    input.addEventListener("keypress", (e) => { if (e.key === "Enter") sendMessage(); });

    function appendMessage(sender, text, html) {
      const msg = document.createElement("div");
      msg.classList.add("message", sender);
      const bubble = document.createElement("div");
      bubble.classList.add("bubble");
      bubble.innerHTML = html || text;
      msg.appendChild(bubble);
      chatWindow.appendChild(msg);
      chatWindow.scrollTop = chatWindow.scrollHeight;
    }

    function sendMessage() {
      const text = input.value.trim();
      if (!text) return;
      appendMessage("user", text);
      input.value = "";
      setTimeout(() => handleBotResponse(text), 500);
    }

    // === FAQ 데이터 ===
    const FAQS = [
      { q: "예금 금리는 어떻게 결정되나요?", a: "예금 금리는 시장금리, 기준금리, 은행의 자금조달 상황에 따라 결정됩니다." },
      { q: "정기예금 중도해지 시 이자는 어떻게 계산되나요?", a: "정해진 만기 전에 해지할 경우, 약정이율이 아닌 중도해지이율이 적용됩니다." },
      { q: "적금 자동이체 날짜를 변경할 수 있나요?", a: "네, 인터넷뱅킹 또는 모바일 앱에서 자동이체일 변경이 가능합니다." },
      { q: "적금 만기일은 어떻게 확인하나요?", a: "모바일 앱 또는 인터넷뱅킹 ‘적금조회’ 메뉴에서 확인하실 수 있습니다." },
      { q: "체크카드 분실 시 어떻게 해야 하나요?", a: "즉시 고객센터로 신고하거나 모바일앱에서 ‘분실신고’를 통해 정지할 수 있습니다." },
      { q: "신용카드 결제일을 변경할 수 있나요?", a: "결제일은 매월 지정일 기준으로 변경 가능하며, 고객센터 또는 앱에서 조정할 수 있습니다." },
      { q: "해외 결제 시 수수료는 얼마인가요?", a: "해외 결제 시 1% 내외의 국제브랜드 수수료와 은행 환전 수수료가 부과됩니다." },
      { q: "예금자 보호 한도는 얼마인가요?", a: "예금보험공사 보호 한도는 1인당 5천만원(원금+이자)입니다." }
    ];

    function showFAQList() {
      let html = "<b>자주 묻는 질문 🔍</b><br>";
      FAQS.forEach((f, i) => {
        html += `<button class='faq-btn' onclick='showAnswer(${i})'>${f.q}</button>`;
      });
      appendMessage("bot", html, html);
    }

    function showAnswer(index) {
      const f = FAQS[index];
      appendMessage("user", f.q);
      setTimeout(() => appendMessage("bot", f.a), 400);
    }

    function handleBotResponse(userText) {
      if (userText.includes("faq") || userText.includes("질문") || userText.includes("도움")) {
        showFAQList();
        return;
      }
      appendMessage("bot", "‘예금·적금·카드’ 관련 자주 묻는 질문이 있습니다.<br><button class='faq-btn' onclick='showFAQList()'>FAQ 보기</button>");
    }

    appendMessage("bot", "안녕하세요! 👋<br>예금·적금·카드 관련 질문을 도와드립니다.<br><button class='faq-btn' onclick='showFAQList()'>자주 묻는 질문 보기</button>");
  </script>
</body>
</html>
